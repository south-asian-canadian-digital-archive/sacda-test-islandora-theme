{#
/**
 * @file
 * Custom menu template for account menu in SACDA theme.
 */
#}
{% import _self as menus %}

<div class="sacda-account-menu-wrapper" aria-label="Account menu">
	<div class="sacda-account-mobile-links">
		{{ menus.menu_links_simple(items) }}
	</div>

	<div class="sacda-account-desktop relative inline-block text-left">
		<button type="button" class="flex items-center justify-center p-2 cursor-pointer rounded-full hover:bg-gray-100 focus:outline-none transition-colors duration-200" id="sacda-account-menu-button" aria-expanded="false" aria-haspopup="true">
			<span class="sr-only">Open account menu</span>
			<svg class="h-8 w-8 text-secondary" width="32" height="32" xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
			</svg>
		</button>

		<div id="sacda-account-dropdown" class="absolute right-0 mt-2 min-w-48 whitespace-nowrap rounded-md shadow-lg bg-white border border-gray-200 focus:outline-none sacda-hide z-50">
			{{ menus.menu_links_dropdown(items) }}
		</div>
	</div>
</div>
{% macro menu_links_simple(items) %}
	{% if items %}
		<ul class="flex flex-row items-center gap-4 list-none m-0 p-0">
			{% for item in items %}
				<li class="list-none">
					<a href="{{ item.url }}" class="text-sm font-semibold uppercase text-foreground no-underline hover:text-primary transition-colors duration-200" {% if item.in_active_trail %} aria-current="page" {% endif %}>
						{{ item.title }}
					</a>
				</li>
			{% endfor %}
		</ul>
	{% endif %}
{% endmacro %}
{% macro menu_links_dropdown(items) %}
	{% if items %}
		<ul class="flex flex-col list-none m-0 p-2">
			{% for item in items %}
				<li class="list-none">
					<a href="{{ item.url }}" class="block px-4 py-2 text-sm text-foreground no-underline rounded hover:bg-gray-100 transition-colors duration-200" {% if item.in_active_trail %} aria-current="page" {% endif %}>
						{{ item.title }}
					</a>
				</li>
			{% endfor %}
		</ul>
	{% endif %}
{% endmacro %}
<style>
	.sacda-account-mobile-links {
		display: block;
	}
	.sacda-account-desktop {
		display: none;
	}
	@media(min-width: 48rem) {
		.sacda-account-mobile-links {
			display: none !important;
		}
		.sacda-account-desktop {
			display: inline-block !important;
		}
	}
</style>

<script>
	(function () {
var button = document.getElementById('sacda-account-menu-button');
var dropdown = document.getElementById('sacda-account-dropdown');

if (! button || ! dropdown) 
return;



button.addEventListener('click', function (e) {
e.stopPropagation();
var expanded = this.getAttribute('aria-expanded') === 'true';
this.setAttribute('aria-expanded', String(! expanded));
dropdown.classList.toggle('sacda-hide');
});

// Close dropdown when clicking outside
document.addEventListener('click', function (e) {
if (! dropdown.contains(e.target) && ! button.contains(e.target)) {
dropdown.classList.add('sacda-hide');
button.setAttribute('aria-expanded', 'false');
}
});

// Close on escape key
document.addEventListener('keydown', function (e) {
if (e.key === 'Escape' && ! dropdown.classList.contains('sacda-hide')) {
dropdown.classList.add('sacda-hide');
button.setAttribute('aria-expanded', 'false');
button.focus();
}
});
})();
</script>
